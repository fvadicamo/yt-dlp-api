# Cursor Rules - yt-dlp REST API

Quick reference for Cursor AI. For complete details, see the linked documents.

## Critical Rules (Always Check)

1. **NEVER commit to `main` or `develop`** - Always use feature branches
2. **ALWAYS use virtual environment** - Never system Python
3. **Run `make check` before committing** - Format, lint, type, security, test

## Primary Sources

| Topic | Reference |
|-------|-----------|
| Git Workflow | [CONTRIBUTING.md](CONTRIBUTING.md) ยง Git Workflow |
| Commit Format | [CONTRIBUTING.md](CONTRIBUTING.md) ยง Commit Message Format |
| Code Style | [.gemini/styleguide.md](.gemini/styleguide.md) |
| Testing | [.gemini/styleguide.md](.gemini/styleguide.md) ยง Testing Standards |
| Documentation | [CONTRIBUTING.md](CONTRIBUTING.md) ยง Documentation Guidelines |
| Release Process | [RELEASING.md](RELEASING.md) |

## Quick Reference

### Git Commands
```bash
# Create feature branch
git checkout develop && git pull origin develop
git checkout -b feature/<name>
git push -u origin feature/<name>

# Commit format
git commit -m "type: description"
# Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore
```

### Virtual Environment
```bash
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate   # Windows
```

### Quality Checks
```bash
make check      # All checks
make format     # Black + isort
make lint       # Flake8
make type-check # Mypy
make test       # pytest
```

## Code Style Summary

- **Python**: 3.11+, PEP 8
- **Line length**: 100 chars (Black)
- **Type hints**: Required for public functions
- **Docstrings**: Google-style for public APIs
- **Async**: Use `async/await`, never blocking calls in async functions
- **Security**: No hardcoded secrets, sanitize paths, no shell injection

## Testing

- **Coverage**: 80%+ minimum
- **Structure**: `tests/unit/`, `tests/integration/`
- **Async tests**: `@pytest.mark.asyncio` + `AsyncMock`
